@using ShoeStoreManagement.Views.Shared.Components;
<!-- Button trigger modal -->
@using ShoeStoreManagement.Core.Models
@using ShoeStoreManagement.Areas.Identity.Data
@model Order

@{
    ApplicationUser? user = ViewData["pickedUser"] as ApplicationUser ?? new ApplicationUser();
    List<Product>? items = ViewData["pickedItems"] as List<Product> ?? new List<Product>();
}

<div class="row">
    <p class="h1" id="label" style="margin-left:auto;margin-right:auto">Add a new Order</p>
</div>
<div class="row p-0 mt-2">

    <div class="col-6 d-flex flex-column gap-2">
        <div class="d-flex flex-row">
            <partial name="CustomerDialog.cshtml" view-data="ViewData" />
        </div>
        <div>
            <div class="form-floating">
                <input type="text" class="form-control" id="floatingInput" hidden asp-for="UserId" placeholder="Nguyen Van A">
                <label for="floatingInput">Enter Name</label>
            </div>
            <div class="form-floating">
                <input type="text" class="form-control" id="floatingInput" placeholder="Nguyen Van A" value="@user.UserName">
                <label for="floatingInput">Enter Name</label>
            </div>
            @if (user != null)
            {
                <div class="form-floating">
                    <select class="form-select" id="floatingSelect" aria-label="Floating label select example" asp-for="DeliveryAddress">

                            @foreach (var i in user.Addresses)
                            {
                      
                                <option value="@i.UserId">
                                   @i.AddressDetail
                                </option>
                            }

                    </select>
                    <label for="floatingSelect">Category</label>
                </div>

                
            }
            else
            {
                <div class="form-floating">
                    <input type="text" class="form-control" id="floatingInput" placeholder="Thu Duc, Tp.Ho Chi Minh">
                    <label for="floatingInput">Enter Address</label>
                </div>
            }

            <div class="form-floating">
                <input type="tel" class="form-control" id="floatingInput" placeholder="0947xxx73" value="@user.PhoneNumber">
                <label for="floatingInput">Enter Phone</label>
            </div>
            <div class="form-floating">
                <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com" value="@user.Email">
                <label for="floatingInput">Enter Email</label>
            </div>
        </div>
    </div>

    <div class="col-6 d-flex flex-column gap-2">
        <div class="d-flex flex-row">
            <partial name="ProductDialog.cshtml" view-data="ViewData" />
        </div>


        <div class="row ms-1">
            @foreach(var item in items){
                <component type="typeof(CartItemCard)" render-mode="Static" param-product=@item />

            }
           
        </div>

        <div class="d-flex justify-content-between mt-3">
            <h5>Amounts</h5>
            <h5>3</h5>
        </div>
        <div class="d-flex justify-content-between">
            <h4 style="font-weight:bold">Total</h4>
            <h4 style="font-weight:bold">$60</h4>
        </div>
    </div>


</div>
<div class="md-flex justify-content-between">

    <div>
        <button type="button" class="btn btn-primary" style="width:180px;">Back</button>
        <button type="button" class="btn btn-primary" style="width:180px;">Submit</button>
    </div>
</div>

<!-- Modal -->
@*<div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content w-auto px-3 py-3">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalLabel" style="margin-left:auto;margin-right:auto">Add a new Order</h5>
            </div>
            <div class="modal-body p-0 mt-2" style="width: 800px; height: 400px">
                <div class="row">
                    <div class="col-5 d-flex flex-column gap-2">
                        <div class="d-flex flex-row">
                            <h5 style="font-weight:bold; font-size:16px">Customer</h5>
                            <button type="button" class="btn btn-primary " style="width:180px; margin-left:auto">Choose Customer -></button>
                        </div>
                        <div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="floatingInput" placeholder="Nguyen Van A">
                                <label for="floatingInput">Enter Name</label>
                            </div>
                            <div class="form-floating">
                                <input type="text" class="form-control" id="floatingInput" placeholder="Thu Duc, Tp.Ho Chi Minh">
                                <label for="floatingInput">Enter Address</label>
                            </div>
                            <div class="form-floating">
                                <input type="tel" class="form-control" id="floatingInput" placeholder="0947xxx73">
                                <label for="floatingInput">Enter Phone</label>
                            </div>
                            <div class="form-floating">
                                <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
                                <label for="floatingInput">Enter Email</label>
                            </div>
                        </div>
                    </div>

                    <div class="col-7 d-flex flex-column gap-2">
                        <div class="d-flex flex-row">
                            <h5 style="font-weight:bold; font-size:16px">Product</h5>
                            <button type="button" class="btn btn-primary " style="width:120px; margin-left:auto">Add Items -></button>
                        </div>

                        <div class="d-flex justify-content-between">
                            <h5>Amounts</h5>
                            <h5>3</h5>
                        </div>
                        <div class="d-flex justify-content-between">
                            <h4 style="font-weight:bold">Total</h4>
                            <h4 style="font-weight:bold">$60</h4>
                        </div>

                        <component type="typeof(CartItemCard)" render-mode="Static" />
                        <component type="typeof(CartItemCard)" render-mode="Static" />
                    </div>

                </div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
                <p class="icon-back" data-dismiss="modal" aria-label="Back"></p>
                <div>
                    <button type="button" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>*@


